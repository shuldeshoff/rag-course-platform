# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ö—É—Ä—Å "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π RAG –∏ YandexGPT –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö"

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 7 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞](#1-—Ü–µ–ª–∏-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#2-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#3-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
4. [Moodle-–ø–ª–∞–≥–∏–Ω](#4-moodle-–ø–ª–∞–≥–∏–Ω)
5. [RAG-—Å–µ—Ä–≤–∏—Å](#5-rag-—Å–µ—Ä–≤–∏—Å)
6. [API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã](#6-api-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
7. [–£—á–µ–±–Ω—ã–π –∫—É—Ä—Å](#7-—É—á–µ–±–Ω—ã–π-–∫—É—Ä—Å)
8. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#8-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
9. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#9-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
10. [–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞](#10-–¥–æ—Ä–æ–∂–Ω–∞—è-–∫–∞—Ä—Ç–∞)
11. [–°–º–µ—Ç–∞ —Ä–∞–±–æ—Ç](#11-—Å–º–µ—Ç–∞-—Ä–∞–±–æ—Ç)

---

## 1. –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

### 1.1. –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏

–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —É—á–µ–±–Ω—ã–π –∫—É—Ä—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞–º:
- –ü–æ–Ω—è—Ç—å –æ—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å Large Language Models (LLM)
- –û—Å–≤–æ–∏—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é Retrieval-Augmented Generation (RAG)
- –ù–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å YandexGPT API
- –°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–∞ –±–∞–∑–µ RAG

### 1.2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ü–µ–ª–∏

- –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π Moodle-–ø–ª–∞–≥–∏–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
- –°–æ–∑–¥–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π RAG-—Å–µ—Ä–≤–∏—Å —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ —Ä–µ—Å—É—Ä—Å–∞–º
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–æ—Å—Ç–æ—Ç—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —è–¥—Ä–∞ Moodle
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

---

## 2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### 2.1. Moodle-–ø–ª–∞–≥–∏–Ω

**–Ø–∑—ã–∫ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫:**
- PHP 7.4+ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Moodle 3.9+)
- Moodle Block Plugin API
- Vanilla JavaScript (ES6+) –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- CSS3 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- –ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö PHP-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ HTTP-–∫–ª–∏–µ–Ω—Ç–∞ Moodle (curl)

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Moodle XMLDB –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PostgreSQL, MySQL, MariaDB

### 2.2. RAG-—Å–µ—Ä–≤–∏—Å

**Backend —Ñ—Ä–µ–π–º–≤–æ—Ä–∫:**
- Python 3.10+
- FastAPI 0.104+
- Uvicorn (ASGI —Å–µ—Ä–≤–µ—Ä)
- Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**ML –∏ NLP –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
- LangChain 0.1+ (orchestration)
- sentence-transformers –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –ú–æ–¥–µ–ª—å: `intfloat/multilingual-e5-large` (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞)
- PyPDF2 / python-docx –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:**
- Qdrant 1.7+ (–æ—Å–Ω–æ–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Milvus Lite –∏–ª–∏ ChromaDB
- HTTP/gRPC API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YandexGPT:**
- yandexcloud SDK –∏–ª–∏ –ø—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- –ú–æ–¥–µ–ª—å: YandexGPT Lite –∏–ª–∏ Pro (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- PostgreSQL 14+ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–æ–≤
- SQLAlchemy 2.0+ ORM
- Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- Redis 7+ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- Prometheus –¥–ª—è –º–µ—Ç—Ä–∏–∫
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (structlog)

### 2.3. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è:**
- Docker 24+
- Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- Multi-stage builds –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞

**–í–µ–±-—Å–µ—Ä–≤–µ—Ä (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞):**
- Nginx –∫–∞–∫ reverse proxy
- SSL/TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt)

**CI/CD (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- GitHub Actions –∏–ª–∏ GitLab CI
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤

---

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 3.1. –û–±—â–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Moodle LMS                         ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ   AI Assistant Block Plugin          ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ                                       ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Chat UI   ‚îÇ    ‚îÇ  API Client  ‚îÇ ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ HTTPS + API Token
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           RAG Service (FastAPI)                 ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ  ‚îÇ   API Layer  ‚îÇ  ‚îÇ  Auth Layer  ‚îÇ           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ         ‚îÇ                                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ      RAG Orchestration               ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Retriever‚îÇ  ‚îÇ  Generator       ‚îÇ  ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ  (YandexGPT)    ‚îÇ  ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ          ‚îÇ                                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ   Qdrant     ‚îÇ         ‚îÇ  PostgreSQL  ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  (Vectors)   ‚îÇ         ‚îÇ  (Metadata)  ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚îÇ HTTPS API
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            YandexGPT API                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2. –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**Separation of Concerns:**
- Moodle –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ UI –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- RAG-—Å–µ—Ä–≤–∏—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å—é —Ç—è–∂–µ–ª—É—é —Ä–∞–±–æ—Ç—É
- YandexGPT –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞

**Stateless API:**
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –Ω–µ–∑–∞–≤–∏—Å–∏–º
- –ù–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

**Fail-Safe:**
- –¢–∞–π–º–∞—É—Ç—ã –Ω–∞ –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–∞—Ö
- Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

**Scalability:**
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ RAG-—Å–µ—Ä–≤–∏—Å–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## 4. Moodle-–ø–ª–∞–≥–∏–Ω

### 4.1. –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞

**–¢–∏–ø:** block_aiassistant  
**–ù–∞–∑–≤–∞–Ω–∏–µ:** AI Assistant Block  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** Moodle 3.9, 3.11, 4.0, 4.1, 4.2, 4.3

### 4.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
blocks/aiassistant/
‚îú‚îÄ‚îÄ version.php              # –í–µ—Ä—Å–∏—è –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ block_aiassistant.php    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–ª–æ–∫–∞
‚îú‚îÄ‚îÄ settings.php             # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îú‚îÄ‚îÄ access.php          # –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îî‚îÄ‚îÄ install.xml         # –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ lang/
‚îÇ   ‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ block_aiassistant.php
‚îÇ   ‚îî‚îÄ‚îÄ ru/
‚îÇ       ‚îî‚îÄ‚îÄ block_aiassistant.php
‚îú‚îÄ‚îÄ classes/
‚îÇ   ‚îú‚îÄ‚îÄ api_client.php      # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è RAG-—Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ logger.php          # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ output/
‚îÇ       ‚îî‚îÄ‚îÄ renderer.php    # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ UI
‚îú‚îÄ‚îÄ styles.css              # CSS —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ amd/
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îî‚îÄ‚îÄ chat.js         # JavaScript –º–æ–¥—É–ª—å
‚îî‚îÄ‚îÄ templates/
    ‚îî‚îÄ‚îÄ chat_interface.mustache  # Mustache —à–∞–±–ª–æ–Ω
```

### 4.3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü–∞: mdl_block_aiassistant_logs**

```sql
CREATE TABLE mdl_block_aiassistant_logs (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    userid BIGINT NOT NULL,
    courseid BIGINT NOT NULL,
    question TEXT NOT NULL,
    answer TEXT,
    response_time INT,
    status VARCHAR(20),
    error_message TEXT,
    timecreated BIGINT NOT NULL,
    INDEX idx_user (userid),
    INDEX idx_course (courseid),
    INDEX idx_time (timecreated)
);
```

### 4.4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–°—Ç—Ä–∞–Ω–∏—Ü–∞: Site administration ‚Üí Plugins ‚Üí Blocks ‚Üí AI Assistant

**–ü–æ–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:**

1. **RAG Service URL**
   - –¢–∏–ø: text
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: http://localhost:8000
   - –í–∞–ª–∏–¥–∞—Ü–∏—è: –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å http:// –∏–ª–∏ https://

2. **API Token**
   - –¢–∏–ø: passwordunmask
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –ø—É—Å—Ç–æ
   - –¢—Ä–µ–±—É–µ—Ç—Å—è: –¥–∞

3. **Request Timeout**
   - –¢–∏–ø: text
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10
   - –ï–¥–∏–Ω–∏—Ü—ã: —Å–µ–∫—É–Ω–¥—ã
   - –î–∏–∞–ø–∞–∑–æ–Ω: 5-30

4. **Enable Logging**
   - –¢–∏–ø: checkbox
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –≤–∫–ª—é—á–µ–Ω–æ

5. **Max Question Length**
   - –¢–∏–ø: text
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 500
   - –ï–¥–∏–Ω–∏—Ü—ã: —Å–∏–º–≤–æ–ª—ã

### 4.5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–ë–ª–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫—É—Ä—Å–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ü§ñ AI Assistant               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –ø–æ –∫—É—Ä—Å—É  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                          ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                ‚îÇ
‚îÇ  [–û—Ç–ø—Ä–∞–≤–∏—Ç—å]                   ‚îÇ
‚îÇ                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ üí¨ –û—Ç–≤–µ—Ç:                ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ [–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ—Ç–≤–µ—Ç]   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                          ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ UI:**

- –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ—Å—Å–∏–∏ (localStorage)

### 4.6. JavaScript —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**–§–∞–π–ª: amd/src/chat.js**

–§—É–Ω–∫—Ü–∏–∏:
- `sendQuestion()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ AJAX
- `displayAnswer()` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
- `showLoading()` - –ø–æ–∫–∞–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- `handleError()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- `saveToHistory()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é

**AJAX –∑–∞–ø—Ä–æ—Å:**

```javascript
{
    method: 'POST',
    url: M.cfg.wwwroot + '/blocks/aiassistant/ajax.php',
    data: {
        sesskey: M.cfg.sesskey,
        action: 'ask_question',
        courseid: courseId,
        question: question
    }
}
```

### 4.7. API –∫–ª–∏–µ–Ω—Ç (PHP)

**–ö–ª–∞—Å—Å: block_aiassistant\api_client**

```php
class api_client {
    private $base_url;
    private $token;
    private $timeout;
    
    public function ask_question($user_id, $course_id, $question);
    private function make_request($endpoint, $data);
    private function validate_response($response);
    private function handle_error($error);
}
```

**–ú–µ—Ç–æ–¥ ask_question:**

```php
public function ask_question($user_id, $course_id, $question) {
    $data = [
        'user_id' => $user_id,
        'course_id' => $course_id,
        'question' => $question
    ];
    
    $response = $this->make_request('/ask', $data);
    
    if ($response['status'] === 'success') {
        return [
            'answer' => $response['answer'],
            'chunks' => $response['chunks_used'] ?? []
        ];
    }
    
    throw new moodle_exception('rag_service_error', 'block_aiassistant');
}
```

### 4.8. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–¢–∏–ø—ã –æ—à–∏–±–æ–∫:**

1. **–°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏**
   - Timeout
   - Connection refused
   - DNS resolution failed

2. **–û—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
   - Invalid token
   - Token expired

3. **–û—à–∏–±–∫–∏ RAG-—Å–µ—Ä–≤–∏—Å–∞**
   - Service unavailable
   - Internal server error
   - Invalid request format

**–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—Ä—É—Å—Å–∫–∏–π):**

- "–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
- "–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞."
- "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É."
- "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–æ–ø—Ä–æ—Å–∞."

---

## 5. RAG-—Å–µ—Ä–≤–∏—Å

### 5.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
rag-service/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                 # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.py               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ request.py         # Pydantic –º–æ–¥–µ–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ response.py        # Pydantic –º–æ–¥–µ–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.py        # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py            # Middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ask.py             # Endpoint /ask
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.py           # Admin endpoints
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ embedder.py        # –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retriever.py       # –ü–æ–∏—Å–∫ –≤ Qdrant
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generator.py       # YandexGPT –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ indexer.py         # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.py              # Database connection
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ crud.py            # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ logger.py          # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îú‚îÄ‚îÄ parsers.py         # –ü–∞—Ä—Å–µ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ       ‚îî‚îÄ‚îÄ validators.py      # –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ alembic/                    # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ tests/                      # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ .env.example
```

### 5.2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª: app/config.py**

```python
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    # API Settings
    API_HOST: str = "0.0.0.0"
    API_PORT: int = 8000
    API_TOKEN: str
    
    # YandexGPT Settings
    YANDEX_API_KEY: str
    YANDEX_FOLDER_ID: str
    YANDEX_MODEL: str = "yandexgpt-lite"
    
    # Qdrant Settings
    QDRANT_HOST: str = "localhost"
    QDRANT_PORT: int = 6333
    QDRANT_COLLECTION: str = "course_materials"
    
    # PostgreSQL Settings
    POSTGRES_HOST: str = "localhost"
    POSTGRES_PORT: int = 5432
    POSTGRES_DB: str = "rag_service"
    POSTGRES_USER: str
    POSTGRES_PASSWORD: str
    
    # Embeddings Settings
    EMBEDDING_MODEL: str = "intfloat/multilingual-e5-large"
    CHUNK_SIZE: int = 500
    CHUNK_OVERLAP: int = 50
    
    # Performance Settings
    MAX_CHUNKS: int = 5
    MAX_CONTEXT_LENGTH: int = 3000
    REQUEST_TIMEOUT: int = 30
    
    class Config:
        env_file = ".env"
```

### 5.3. API Endpoints

#### 5.3.1. POST /ask - –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Bearer token –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ

**Request:**

```json
{
    "user_id": 123,
    "course_id": 456,
    "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞?"
}
```

**Response (Success):**

```json
{
    "status": "success",
    "answer": "–í–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (text embedding) - —ç—Ç–æ —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ –≤–∏–¥–µ —á–∏—Å–ª–æ–≤–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã...",
    "chunks_used": [
        {
            "content": "–≠–º–±–µ–¥–¥–∏–Ω–≥–∏ - —ç—Ç–æ...",
            "score": 0.87,
            "source": "module_3_lecture.pdf",
            "page": 5
        }
    ],
    "response_time_ms": 2341
}
```

**Response (Error):**

```json
{
    "status": "error",
    "error": "Course not found",
    "error_code": "COURSE_NOT_FOUND"
}
```

#### 5.3.2. POST /admin/index - –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Admin token

**Request (multipart/form-data):**

```
course_id: 456
file: [binary data]
metadata: {
    "title": "–ú–æ–¥—É–ª—å 3: –í–µ–∫—Ç–æ—Ä–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞",
    "type": "lecture",
    "module_number": 3
}
```

**Response:**

```json
{
    "status": "success",
    "indexed_chunks": 47,
    "collection": "course_materials",
    "processing_time_ms": 5432
}
```

#### 5.3.3. GET /admin/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**Response:**

```json
{
    "total_questions": 1523,
    "total_courses": 12,
    "avg_response_time_ms": 2145,
    "cache_hit_rate": 0.34,
    "top_questions": [
        {"question": "–ß—Ç–æ —Ç–∞–∫–æ–µ RAG?", "count": 45},
        {"question": "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç YandexGPT?", "count": 38}
    ]
}
```

#### 5.3.4. GET /health - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

**Response:**

```json
{
    "status": "healthy",
    "services": {
        "qdrant": "ok",
        "postgres": "ok",
        "yandex_gpt": "ok"
    },
    "version": "1.0.0"
}
```

### 5.4. Retriever (–ü–æ–∏—Å–∫)

**–§–∞–π–ª: app/services/retriever.py**

```python
class Retriever:
    def __init__(self, qdrant_client, embedder):
        self.client = qdrant_client
        self.embedder = embedder
    
    async def search(
        self, 
        question: str, 
        course_id: int, 
        top_k: int = 5
    ) -> List[Chunk]:
        # 1. –°–æ–∑–¥–∞—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥ –≤–æ–ø—Ä–æ—Å–∞
        question_vector = await self.embedder.embed(question)
        
        # 2. –ü–æ–∏—Å–∫ –≤ Qdrant —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ course_id
        results = self.client.search(
            collection_name="course_materials",
            query_vector=question_vector,
            query_filter=Filter(
                must=[
                    FieldCondition(
                        key="course_id",
                        match=MatchValue(value=course_id)
                    )
                ]
            ),
            limit=top_k
        )
        
        # 3. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        chunks = []
        for result in results:
            chunks.append(Chunk(
                content=result.payload["content"],
                score=result.score,
                source=result.payload["source"],
                metadata=result.payload.get("metadata", {})
            ))
        
        return chunks
```

### 5.5. Generator (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è)

**–§–∞–π–ª: app/services/generator.py**

```python
class YandexGPTGenerator:
    def __init__(self, api_key: str, folder_id: str, model: str):
        self.api_key = api_key
        self.folder_id = folder_id
        self.model = model
        self.endpoint = "https://llm.api.cloud.yandex.net/foundationModels/v1/completion"
    
    async def generate(
        self, 
        question: str, 
        context_chunks: List[Chunk]
    ) -> str:
        # 1. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
        prompt = self._build_prompt(question, context_chunks)
        
        # 2. –ó–∞–ø—Ä–æ—Å –∫ YandexGPT
        payload = {
            "modelUri": f"gpt://{self.folder_id}/{self.model}",
            "completionOptions": {
                "stream": False,
                "temperature": 0.6,
                "maxTokens": 1000
            },
            "messages": [
                {
                    "role": "system",
                    "text": "–¢—ã - –ø–æ–º–æ—â–Ω–∏–∫ –∫—É—Ä—Å–∞ –ø–æ RAG –∏ YandexGPT. –û—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫—É—Ä—Å–∞."
                },
                {
                    "role": "user",
                    "text": prompt
                }
            ]
        }
        
        headers = {
            "Authorization": f"Api-Key {self.api_key}",
            "Content-Type": "application/json"
        }
        
        async with httpx.AsyncClient() as client:
            response = await client.post(
                self.endpoint,
                json=payload,
                headers=headers,
                timeout=30.0
            )
        
        result = response.json()
        answer = result["result"]["alternatives"][0]["message"]["text"]
        
        return answer
    
    def _build_prompt(self, question: str, chunks: List[Chunk]) -> str:
        context = "\n\n".join([
            f"–ú–∞—Ç–µ—Ä–∏–∞–ª {i+1} (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {chunk.score:.2f}):\n{chunk.content}"
            for i, chunk in enumerate(chunks)
        ])
        
        prompt = f"""–ù–∞ –æ—Å–Ω–æ–≤–µ —Å–ª–µ–¥—É—é—â–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫—É—Ä—Å–∞ –æ—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å —Å—Ç—É–¥–µ–Ω—Ç–∞.

–ú–ê–¢–ï–†–ò–ê–õ–´ –ö–£–†–°–ê:
{context}

–í–û–ü–†–û–° –°–¢–£–î–ï–ù–¢–ê:
{question}

–ò–ù–°–¢–†–£–ö–¶–ò–ò:
- –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –û—Ç–≤–µ—á–∞–π —á–µ—Ç–∫–æ –∏ –ø–æ —Å—É—â–µ—Å—Ç–≤—É
- –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —Ç–∞–∫ –∏ —Å–∫–∞–∂–∏
- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫—É—Ä—Å–∞
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–π –æ—Ç–≤–µ—Ç –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è

–û–¢–í–ï–¢:"""
        
        return prompt
```

### 5.6. Indexer (–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è)

**–§–∞–π–ª: app/services/indexer.py**

```python
class DocumentIndexer:
    def __init__(
        self, 
        embedder, 
        qdrant_client, 
        chunk_size: int = 500,
        chunk_overlap: int = 50
    ):
        self.embedder = embedder
        self.client = qdrant_client
        self.chunk_size = chunk_size
        self.chunk_overlap = chunk_overlap
    
    async def index_document(
        self,
        file_path: str,
        course_id: int,
        metadata: dict
    ) -> int:
        # 1. –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞
        text = await self._parse_document(file_path)
        
        # 2. –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏
        chunks = self._split_text(text)
        
        # 3. –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
        embeddings = await self.embedder.embed_batch(chunks)
        
        # 4. –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Qdrant
        points = []
        for i, (chunk, embedding) in enumerate(zip(chunks, embeddings)):
            points.append(
                PointStruct(
                    id=str(uuid.uuid4()),
                    vector=embedding,
                    payload={
                        "content": chunk,
                        "course_id": course_id,
                        "source": metadata.get("title", "unknown"),
                        "chunk_index": i,
                        "metadata": metadata
                    }
                )
            )
        
        self.client.upsert(
            collection_name="course_materials",
            points=points
        )
        
        return len(points)
    
    def _split_text(self, text: str) -> List[str]:
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º LangChain RecursiveCharacterTextSplitter
        from langchain.text_splitter import RecursiveCharacterTextSplitter
        
        splitter = RecursiveCharacterTextSplitter(
            chunk_size=self.chunk_size,
            chunk_overlap=self.chunk_overlap,
            separators=["\n\n", "\n", ". ", " ", ""]
        )
        
        return splitter.split_text(text)
    
    async def _parse_document(self, file_path: str) -> str:
        ext = file_path.split('.')[-1].lower()
        
        if ext == 'pdf':
            return self._parse_pdf(file_path)
        elif ext in ['doc', 'docx']:
            return self._parse_docx(file_path)
        elif ext == 'txt':
            with open(file_path, 'r', encoding='utf-8') as f:
                return f.read()
        else:
            raise ValueError(f"Unsupported file format: {ext}")
```

### 5.7. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü–∞: requests_log**

```sql
CREATE TABLE requests_log (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL,
    course_id INTEGER NOT NULL,
    question TEXT NOT NULL,
    answer TEXT,
    chunks_used JSONB,
    response_time_ms INTEGER,
    status VARCHAR(20),
    error_message TEXT,
    created_at TIMESTAMP DEFAULT NOW(),
    INDEX idx_user_id (user_id),
    INDEX idx_course_id (course_id),
    INDEX idx_created_at (created_at)
);
```

**–¢–∞–±–ª–∏—Ü–∞: indexed_documents**

```sql
CREATE TABLE indexed_documents (
    id SERIAL PRIMARY KEY,
    course_id INTEGER NOT NULL,
    filename VARCHAR(255) NOT NULL,
    file_hash VARCHAR(64) UNIQUE,
    chunks_count INTEGER,
    metadata JSONB,
    indexed_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

---

## 6. API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

### 6.1. –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- Header: `Authorization: Bearer <token>`
- –¢–æ–∫–µ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ middleware
- –ü—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º —Ç–æ–∫–µ–Ω–µ: HTTP 401

**–§–æ—Ä–º–∞—Ç:**
- Content-Type: application/json
- Charset: UTF-8
- –î–∞—Ç–∞/–≤—Ä–µ–º—è: ISO 8601

**–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:**
- 200: –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- 400: –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- 401: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- 404: –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- 500: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- 503: –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### 6.2. –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö (OpenAPI 3.0)

```yaml
openapi: 3.0.0
info:
  title: RAG Service API
  version: 1.0.0
  
paths:
  /ask:
    post:
      summary: –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ –∫—É—Ä—Å—É
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - course_id
                - question
              properties:
                user_id:
                  type: integer
                  example: 123
                course_id:
                  type: integer
                  example: 456
                question:
                  type: string
                  maxLength: 500
                  example: "–ß—Ç–æ —Ç–∞–∫–æ–µ RAG?"
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AskResponse'
        '400':
          description: –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        '401':
          description: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω

components:
  schemas:
    AskResponse:
      type: object
      properties:
        status:
          type: string
          enum: [success, error]
        answer:
          type: string
        chunks_used:
          type: array
          items:
            $ref: '#/components/schemas/Chunk'
        response_time_ms:
          type: integer
    
    Chunk:
      type: object
      properties:
        content:
          type: string
        score:
          type: number
          format: float
        source:
          type: string
        page:
          type: integer
  
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
```

---

## 7. –£—á–µ–±–Ω—ã–π –∫—É—Ä—Å

### 7.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—É—Ä—Å–∞

**–ú–æ–¥—É–ª—å 1: –û—Å–Ω–æ–≤—ã LLM (2 –Ω–µ–¥–µ–ª–∏)**

**–¢–µ–º—ã:**
- –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–æ–≤
- –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã GPT
- –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
- –ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- –õ–µ–∫—Ü–∏—è (PDF, 25 —Å—Ç—Ä–∞–Ω–∏—Ü)
- –í–∏–¥–µ–æ 1: "–ß—Ç–æ —Ç–∞–∫–æ–µ LLM?" (15 –º–∏–Ω)
- –í–∏–¥–µ–æ 2: "–ü—Ä–æ–º–ø—Ç—ã –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç" (20 –º–∏–Ω)
- –ü—Ä–∞–∫—Ç–∏–∫–∞: –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- –¢–µ—Å—Ç: 8 –≤–æ–ø—Ä–æ—Å–æ–≤

---

**–ú–æ–¥—É–ª—å 2: –ß—Ç–æ —Ç–∞–∫–æ–µ RAG (1.5 –Ω–µ–¥–µ–ª–∏)**

**–¢–µ–º—ã:**
- –ü—Ä–æ–±–ª–µ–º—ã —á–∏—Å—Ç—ã—Ö LLM (–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏, —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ)
- –ö–æ–Ω—Ü–µ–ø—Ü–∏—è Retrieval-Augmented Generation
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ RAG-—Å–∏—Å—Ç–µ–º
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è RAG
- –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- –õ–µ–∫—Ü–∏—è (PDF, 20 —Å—Ç—Ä–∞–Ω–∏—Ü)
- –í–∏–¥–µ–æ: "RAG vs Fine-tuning" (18 –º–∏–Ω)
- –ü—Ä–∞–∫—Ç–∏–∫–∞: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å RAG –∏ –±–µ–∑
- –¢–µ—Å—Ç: 6 –≤–æ–ø—Ä–æ—Å–æ–≤

---

**–ú–æ–¥—É–ª—å 3: –í–µ–∫—Ç–æ—Ä–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (2 –Ω–µ–¥–µ–ª–∏)**

**–¢–µ–º—ã:**
- –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ —Å—Ö–æ–¥—Å—Ç–≤–∞ (–∫–æ—Å–∏–Ω—É—Å–Ω–∞—è, –µ–≤–∫–ª–∏–¥–æ–≤–∞)
- –¢–∏–ø—ã –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ë–î (Qdrant, Pinecone, Milvus)
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ (HNSW, IVF)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Qdrant

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- –õ–µ–∫—Ü–∏—è (PDF, 30 —Å—Ç—Ä–∞–Ω–∏—Ü)
- –í–∏–¥–µ–æ 1: "–í–µ–∫—Ç–æ—Ä—ã –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏" (22 –º–∏–Ω)
- –í–∏–¥–µ–æ 2: "–†–∞–±–æ—Ç–∞ —Å Qdrant" (25 –º–∏–Ω)
- –ü—Ä–∞–∫—Ç–∏–∫–∞: —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Qdrant
- –¢–µ—Å—Ç: 8 –≤–æ–ø—Ä–æ—Å–æ–≤

---

**–ú–æ–¥—É–ª—å 4: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (1.5 –Ω–µ–¥–µ–ª–∏)**

**–¢–µ–º—ã:**
- –ü–∞—Ä—Å–∏–Ω–≥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (PDF, DOCX, HTML)
- –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
- –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑–±–∏–µ–Ω–∏—è –Ω–∞ —á–∞–Ω–∫–∏
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- –õ–µ–∫—Ü–∏—è (PDF, 22 —Å—Ç—Ä–∞–Ω–∏—Ü)
- –í–∏–¥–µ–æ: "Chunking —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏" (20 –º–∏–Ω)
- –ü—Ä–∞–∫—Ç–∏–∫–∞: –ø–∞—Ä—Å–∏–Ω–≥ –∏ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –¢–µ—Å—Ç: 7 –≤–æ–ø—Ä–æ—Å–æ–≤

---

**–ú–æ–¥—É–ª—å 5: Retrieval –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ (2 –Ω–µ–¥–µ–ª–∏)**

**–¢–µ–º—ã:**
- –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (–º–æ–¥–µ–ª–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –†–µ-—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- –õ–µ–∫—Ü–∏—è (PDF, 28 —Å—Ç—Ä–∞–Ω–∏—Ü)
- –í–∏–¥–µ–æ 1: "–ú–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤" (18 –º–∏–Ω)
- –í–∏–¥–µ–æ 2: "–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è" (24 –º–∏–Ω)
- –ü—Ä–∞–∫—Ç–∏–∫–∞: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- –¢–µ—Å—Ç: 8 –≤–æ–ø—Ä–æ—Å–æ–≤

---

**–ú–æ–¥—É–ª—å 6: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ YandexGPT (2 –Ω–µ–¥–µ–ª–∏)**

**–¢–µ–º—ã:**
- –û–±–∑–æ—Ä YandexGPT API
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∫–≤–æ—Ç—ã
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (temperature, top_p)
- –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- –°—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- –õ–µ–∫—Ü–∏—è (PDF, 26 —Å—Ç—Ä–∞–Ω–∏—Ü)
- –í–∏–¥–µ–æ 1: "YandexGPT API" (20 –º–∏–Ω)
- –í–∏–¥–µ–æ 2: "–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è RAG" (22 –º–∏–Ω)
- –ü—Ä–∞–∫—Ç–∏–∫–∞: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YandexGPT
- –¢–µ—Å—Ç: 7 –≤–æ–ø—Ä–æ—Å–æ–≤

---

**–ú–æ–¥—É–ª—å 7: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ RAG-—Å–µ—Ä–≤–∏—Å–∞ (2.5 –Ω–µ–¥–µ–ª–∏)**

**–¢–µ–º—ã:**
- –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (Docker, Kubernetes)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- –õ–µ–∫—Ü–∏—è (PDF, 35 —Å—Ç—Ä–∞–Ω–∏—Ü)
- –í–∏–¥–µ–æ 1: "FastAPI –¥–ª—è RAG" (28 –º–∏–Ω)
- –í–∏–¥–µ–æ 2: "–î–µ–ø–ª–æ–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ" (26 –º–∏–Ω)
- –ü—Ä–∞–∫—Ç–∏–∫–∞: —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ RAG-—Å–µ—Ä–≤–∏—Å–∞
- –¢–µ—Å—Ç: 8 –≤–æ–ø—Ä–æ—Å–æ–≤

---

**–ú–æ–¥—É–ª—å 8: –§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (3 –Ω–µ–¥–µ–ª–∏)**

**–ó–∞–¥–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—Ç—å RAG-–±–æ—Ç–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏:

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö**
   - –°–æ–±—Ä–∞—Ç—å 20-30 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —Ç–µ–º–µ
   - –û—á–∏—Å—Ç–∏—Ç—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å
   - –†–∞–∑–±–∏—Ç—å –Ω–∞ —á–∞–Ω–∫–∏

2. **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
   - –°–æ–∑–¥–∞—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

3. **RAG-—Å–µ—Ä–≤–∏—Å**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å YandexGPT
   - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

4. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
   - –ü—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ Telegram –±–æ—Ç
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö

5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - README —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:**
- –ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö (20%)
- –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å RAG-—Å–∏—Å—Ç–µ–º—ã (30%)
- –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ (25%)
- –ö–æ–¥ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (15%)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (10%)

---

### 7.2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –≤ –∫—É—Ä—Å

**–î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è:**

1. –ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —Ç–µ–æ—Ä–∏–∏ —Å—Ç—É–¥–µ–Ω—Ç –º–æ–∂–µ—Ç –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É
2. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –º–æ–¥—É–ª–µ–π
3. –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤–æ–ø—Ä–æ—Å–æ–≤:
   - –ö–∞–∫–∏–µ —Ç–µ–º—ã –≤—ã–∑—ã–≤–∞—é—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤
   - –ö–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã —á–∞—â–µ –≤—Å–µ–≥–æ –∑–∞–¥–∞—é—Ç
   - –ù–∞—Å–∫–æ–ª—å–∫–æ —Å—Ç—É–¥–µ–Ω—Ç—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω—ã –æ—Ç–≤–µ—Ç–∞–º–∏ (–ª–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏)

**–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

–ú–æ–¥—É–ª—å 1:
- "–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è?"
- "–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É GPT-3 –∏ GPT-4?"
- "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –≤–Ω–∏–º–∞–Ω–∏—è?"

–ú–æ–¥—É–ª—å 2:
- "–ü–æ—á–µ–º—É LLM –∏–Ω–æ–≥–¥–∞ –≤—ã–¥–∞—é—Ç –Ω–µ–≤–µ—Ä–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é?"
- "–ß—Ç–æ –ª—É—á—à–µ: RAG –∏–ª–∏ –¥–æ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏?"

–ú–æ–¥—É–ª—å 3:
- "–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫—É —Å—Ö–æ–¥—Å—Ç–≤–∞ –¥–ª—è –º–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö?"
- "–°–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –Ω—É–∂–Ω–æ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞?"

---

## 8. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 8.1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**Moodle ‚Üí RAG-—Å–µ—Ä–≤–∏—Å:**
- Bearer token –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization
- –¢–æ–∫–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º RAG-—Å–µ—Ä–≤–∏—Å–∞
- –¢–æ–∫–µ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ middleware FastAPI
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–æ—Ç–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Moodle:**
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é Moodle
- user_id –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- RAG-—Å–µ—Ä–≤–∏—Å –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–æ–≤–µ—Ä—è–µ—Ç Moodle)

### 8.2. –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ù–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ production
- GDPR compliance: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

**–•—Ä–∞–Ω–µ–Ω–∏–µ:**
- –í–µ–∫—Ç–æ—Ä—ã –≤ Qdrant –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç PII
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º
- –ë—ç–∫–∞–ø—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã

### 8.3. –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π

**Rate Limiting:**
- –ú–∞–∫—Å–∏–º—É–º 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ú–∞–∫—Å–∏–º—É–º 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –¥–ª—è –≤—Å–µ–≥–æ Moodle
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Redis + FastAPI middleware

**–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–∞:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –≤–æ–ø—Ä–æ—Å–∞: 500 —Å–∏–º–≤–æ–ª–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic

**–ó–∞—â–∏—Ç–∞ API:**
- HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è production
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–æ–º–µ–Ω–∞ Moodle
- –°–∫—Ä—ã—Ç–∏–µ –≤–µ—Ä—Å–∏–π –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö

### 8.4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–õ–æ–≥–∏:**
- –í—Å–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- –û—à–∏–±–∫–∏ 500 (–º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –∞—Ç–∞–∫—É)

**–ê–ª–µ—Ä—Ç—ã:**
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ rate limit
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

---

## 9. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 9.1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- CPU: 4 —è–¥—Ä–∞
- RAM: 8 GB
- –î–∏—Å–∫: 50 GB SSD
- –û–°: Ubuntu 22.04 LTS

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- CPU: 8 —è–¥–µ—Ä
- RAM: 16 GB
- –î–∏—Å–∫: 100 GB NVMe SSD
- –û–°: Ubuntu 22.04 LTS

**–î–ª—è 1000+ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:**
- CPU: 16+ —è–¥–µ—Ä
- RAM: 32 GB
- –î–∏—Å–∫: 200 GB NVMe SSD
- Load Balancer –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

### 9.2. Docker Compose (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

**–§–∞–π–ª: docker-compose.yml**

```yaml
version: '3.8'

services:
  rag-service:
    build: .
    ports:
      - "8000:8000"
    environment:
      - API_TOKEN=${API_TOKEN}
      - YANDEX_API_KEY=${YANDEX_API_KEY}
      - YANDEX_FOLDER_ID=${YANDEX_FOLDER_ID}
      - POSTGRES_HOST=postgres
      - POSTGRES_USER=${POSTGRES_USER}
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
      - QDRANT_HOST=qdrant
    depends_on:
      - postgres
      - qdrant
    volumes:
      - ./uploads:/app/uploads
    restart: unless-stopped

  postgres:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=rag_service
      - POSTGRES_USER=${POSTGRES_USER}
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  qdrant:
    image: qdrant/qdrant:v1.7.4
    ports:
      - "6333:6333"
    volumes:
      - qdrant_data:/qdrant/storage
    environment:
      - QDRANT__SERVICE__GRPC_PORT=6334

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  qdrant_data:
  redis_data:
```

### 9.3. Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

**–®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞**
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo apt install docker-compose-plugin
```

2. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone https://github.com/yourorg/rag-service.git
cd rag-service
```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
cp .env.example .env
nano .env
```

4. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**
```bash
docker compose up -d
```

5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏**
```bash
curl http://localhost:8000/health
```

6. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx**
```nginx
server {
    listen 80;
    server_name rag.example.com;
    
    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_read_timeout 30s;
    }
}
```

7. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**
```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d rag.example.com
```

### 9.4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Moodle-–ø–ª–∞–≥–∏–Ω–∞

**–®–∞–≥–∏:**

1. –°–∫–∞—á–∞—Ç—å ZIP-–∞—Ä—Ö–∏–≤ –ø–ª–∞–≥–∏–Ω–∞
2. –í Moodle: Site administration ‚Üí Plugins ‚Üí Install plugins
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å ZIP-–∞—Ä—Ö–∏–≤
4. –ù–∞–∂–∞—Ç—å "Install plugin from the ZIP file"
5. –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –º–∞—Å—Ç–µ—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
6. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏: –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞–≥–∏–Ω–∞
7. –£–∫–∞–∑–∞—Ç—å URL RAG-—Å–µ—Ä–≤–∏—Å–∞ –∏ API —Ç–æ–∫–µ–Ω
8. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ê–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–∞ –∫—É—Ä—Å–µ:**

1. –û—Ç–∫—Ä—ã—Ç—å –∫—É—Ä—Å
2. –í–∫–ª—é—á–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
3. Add a block ‚Üí AI Assistant
4. –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –±–ª–æ–∫ –≤ —É–¥–æ–±–Ω–æ–º –º–µ—Å—Ç–µ
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## 10. –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

### –§–∞–∑–∞ 1: –ü—Ä–æ—Ç–æ—Ç–∏–ø (2-3 –Ω–µ–¥–µ–ª–∏)

**–ù–µ–¥–µ–ª—è 1:**
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π endpoint /ask –±–µ–∑ RAG
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ YandexGPT API
- ‚úÖ Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ù–µ–¥–µ–ª—è 2:**
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Qdrant
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Embedder
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Retriever
- ‚úÖ –ü–æ–ª–Ω—ã–π RAG pipeline
- ‚úÖ –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ù–µ–¥–µ–ª—è 3:**
- ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Moodle-–ø–ª–∞–≥–∏–Ω–∞ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- ‚úÖ UI –±–ª–æ–∫–∞ –≤ Moodle
- ‚úÖ API –∫–ª–∏–µ–Ω—Ç –≤ PHP
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Moodle ‚Üî RAG-—Å–µ—Ä–≤–∏—Å
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ e2e

### –§–∞–∑–∞ 2: MVP (3-4 –Ω–µ–¥–µ–ª–∏)

**–ù–µ–¥–µ–ª—è 4:**
- ‚úÖ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (admin endpoint)
- ‚úÖ –ü–∞—Ä—Å–µ—Ä—ã –¥–ª—è PDF/DOCX
- ‚úÖ Chunking —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ë–î

**–ù–µ–¥–µ–ª—è 5:**
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ Rate limiting
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ Moodle

**–ù–µ–¥–µ–ª—è 6:**
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ Endpoint /admin/stats
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)

**–ù–µ–¥–µ–ª—è 7:**
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ production

### –§–∞–∑–∞ 3: –ö–æ–Ω—Ç–µ–Ω—Ç –∫—É—Ä—Å–∞ (4-5 –Ω–µ–¥–µ–ª—å)

**–ù–µ–¥–µ–ª—è 8-9:**
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∏–µ –ª–µ–∫—Ü–∏–π –ú–æ–¥—É–ª–∏ 1-4
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞

**–ù–µ–¥–µ–ª—è 10-11:**
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∏–µ –ª–µ–∫—Ü–∏–π –ú–æ–¥—É–ª–∏ 5-7
- ‚úÖ –°—ä–µ–º–∫–∞ –∏ –º–æ–Ω—Ç–∞–∂ –≤–∏–¥–µ–æ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

**–ù–µ–¥–µ–ª—è 12:**
- ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã —Ä–µ—à–µ–Ω–∏–π

### –§–∞–∑–∞ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ (2-3 –Ω–µ–¥–µ–ª–∏)

**–ù–µ–¥–µ–ª—è 13:**
- ‚úÖ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫—É—Ä—Å–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ production —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ RAG-—Å–µ—Ä–≤–∏—Å–∞

**–ù–µ–¥–µ–ª—è 14:**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ –≤ Moodle
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–∞ –≤ Moodle
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–ù–µ–¥–µ–ª—è 15:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –∫—É—Ä—Å–∞

---

## 11. –°–º–µ—Ç–∞ —Ä–∞–±–æ—Ç

### 11.1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã | –°—Ç–∞–≤–∫–∞ (‚ÇΩ/—á–∞—Å) | –°—É–º–º–∞ (‚ÇΩ) |
|--------|------|----------------|-----------|
| Backend RAG-—Å–µ—Ä–≤–∏—Å | 80 | 3000 | 240 000 |
| Moodle-–ø–ª–∞–≥–∏–Ω | 60 | 3000 | 180 000 |
| Frontend (UI –±–ª–æ–∫–∞) | 20 | 2500 | 50 000 |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 40 | 3000 | 120 000 |
| **–ò—Ç–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** | **200** | | **590 000** |

### 11.2. –ö–æ–Ω—Ç–µ–Ω—Ç

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã | –°—Ç–∞–≤–∫–∞ (‚ÇΩ/—á–∞—Å) | –°—É–º–º–∞ (‚ÇΩ) |
|--------|------|----------------|-----------|
| –ù–∞–ø–∏—Å–∞–Ω–∏–µ –ª–µ–∫—Ü–∏–π | 60 | 2000 | 120 000 |
| –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ | 40 | 2500 | 100 000 |
| –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤ | 20 | 1500 | 30 000 |
| –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è | 30 | 2000 | 60 000 |
| **–ò—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç** | **150** | | **310 000** |

### 11.3. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–≥–æ–¥–æ–≤–∞—è)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–æ–∏–º–æ—Å—Ç—å (‚ÇΩ/–º–µ—Å) | –ì–æ–¥–æ–≤–∞—è (‚ÇΩ) |
|-----------|-------------------|-------------|
| –°–µ—Ä–≤–µ—Ä (VPS 8 CPU/16 GB) | 5 000 | 60 000 |
| –î–æ–º–µ–Ω –∏ SSL | 500 | 6 000 |
| YandexGPT API (10K –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å) | 15 000 | 180 000 |
| –ë—ç–∫–∞–ø—ã –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | 1 000 | 12 000 |
| **–ò—Ç–æ–≥–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** | **21 500** | **258 000** |

### 11.4. –ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã

| –°—Ç–∞—Ç—å—è | –°—É–º–º–∞ (‚ÇΩ) |
|--------|-----------|
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ QA | 50 000 |
| –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 30 000 |
| –ù–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (10%) | 98 000 |
| **–ò—Ç–æ–≥–æ –ø—Ä–æ—á–∏–µ** | **178 000** |

### 11.5. –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—É–º–º–∞ (‚ÇΩ) |
|-----------|-----------|
| –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | 590 000 |
| –ö–æ–Ω—Ç–µ–Ω—Ç | 310 000 |
| –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (1 –≥–æ–¥) | 258 000 |
| –ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã | 178 000 |
| **–ò–¢–û–ì–û** | **1 336 000** |

### 11.6. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

| –§—É–Ω–∫—Ü–∏—è | –°—É–º–º–∞ (‚ÇΩ) |
|---------|-----------|
| Telegram-–±–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | 80 000 |
| –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥ | 120 000 |
| –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å | 100 000 |
| –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | 300 000 |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ A/B —Ç–µ—Å—Ç—ã | 150 000 |

---

## 12. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

### 12.1. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏

**RAG-—Å–µ—Ä–≤–∏—Å:**
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ ‚â§ 5 —Å–µ–∫—É–Ω–¥ –≤ 95% —Å–ª—É—á–∞–µ–≤
- ‚úÖ Uptime ‚â• 99%
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–Ω–∏–º—É–º 50 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF –∏ DOCX —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É

**Moodle-–ø–ª–∞–≥–∏–Ω:**
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Moodle 3.9+, 4.x
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —è–¥—Ä–∞
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π UI –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤:**
- ‚úÖ –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ ‚â• 80% (–ø–æ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –æ—Ü–µ–Ω–∫–µ)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫—É—Ä—Å–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ä—É—Å—Å–∫–∏–º —è–∑—ã–∫–æ–º
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, —á–∏—Ç–∞–µ–º—ã–µ –æ—Ç–≤–µ—Ç—ã

### 12.2. –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏

**–ö—É—Ä—Å:**
- ‚úÖ –í—Å–µ 8 –º–æ–¥—É–ª–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞–ø–∏—Å–∞–Ω—ã
- ‚úÖ –ú–∏–Ω–∏–º—É–º 1 –≤–∏–¥–µ–æ –Ω–∞ –º–æ–¥—É–ª—å
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
- ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ —Ä–µ—à–µ–Ω–∏–π
- ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ –æ—Ü–µ–Ω–∫–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–ª–∞–≥–∏–Ω–∞
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ FAQ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π

### 12.3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏

- ‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (loading indicators)
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç
- ‚úÖ –†–∞–±–æ—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

## 13. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### 13.1. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏

**–†–∏—Å–∫:** YandexGPT API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –ª–∏–º–∏—Ç—ã –∏—Å—á–µ—Ä–ø–∞–Ω—ã

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- Graceful degradation (—Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–≤–æ—Ç
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

**–†–∏—Å–∫:** Qdrant –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Milvus

**–†–∏—Å–∫:** –ë–æ–ª—å—à–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –æ—Ç–≤–µ—Ç–∞

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ (–º–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤)
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ chunks
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### 13.2. –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ —Ä–∏—Å–∫–∏

**–†–∏—Å–∫:** –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∫—É—Ä—Å–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –¢—â–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –°–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –æ—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

**–†–∏—Å–∫:** –ü–ª–∞–≥–∏–∞—Ç –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –£–∫–∞–∑–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –æ—Ç–≤–µ—Ç–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å

### 13.3. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏

**–†–∏—Å–∫:** –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–≤—å—é
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è MVP —Ñ—É–Ω–∫—Ü–∏–π
- –ë—É—Ñ–µ—Ä –≤—Ä–µ–º–µ–Ω–∏ –≤ –≥—Ä–∞—Ñ–∏–∫–µ

**–†–∏—Å–∫:** –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å–º–µ—Ç–∞ —Å —Ä–µ–∑–µ—Ä–≤–æ–º
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞—Å—Ö–æ–¥–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ open-source —Ä–µ—à–µ–Ω–∏–π

---

## 14. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ

### 14.1. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–£—Ä–æ–≤–µ–Ω—å 1 (–°—Ç—É–¥–µ–Ω—Ç—ã):**
- FAQ –≤ –∫—É—Ä—Å–µ
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- Email –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–£—Ä–æ–≤–µ–Ω—å 2 (–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏/–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã):**
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- –û–±—É—á–∞—é—â–∏–µ –≤–∏–¥–µ–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- Telegram/Email –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

**–£—Ä–æ–≤–µ–Ω—å 3 (–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏):**
- GitHub Issues
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

### 14.2. –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

**–ö–≤–∞—Ä—Ç–∞–ª 1:**
- –°–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ö–≤–∞—Ä—Ç–∞–ª 2:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ö–≤–∞—Ä—Ç–∞–ª 3:**
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ LMS
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ö–≤–∞—Ä—Ç–∞–ª 4:**
- –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

### 14.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

- –ï–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è —Ä–µ–≤–∏–∑–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ –∫–µ–π—Å–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

---

## 15. –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

### 15.1. –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞:** [–ò–º—è]
- **Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** [–ò–º—è]
- **Moodle —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** [–ò–º—è]
- **–ö–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä:** [–ò–º—è]
- **DevOps –∏–Ω–∂–µ–Ω–µ—Ä:** [–ò–º—è]

### 15.2. –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π RAG-—Å–µ—Ä–≤–∏—Å–∞:** [URL]
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Moodle-–ø–ª–∞–≥–∏–Ω–∞:** [URL]
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [URL]
- **–î–µ–º–æ-–≤–µ—Ä—Å–∏—è:** [URL]
- **Trello/Jira:** [URL]

### 15.3. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **YandexGPT:** https://cloud.yandex.ru/docs/yandexgpt/
- **Qdrant:** https://qdrant.tech/documentation/
- **Moodle Docs:** https://docs.moodle.org/
- **FastAPI:** https://fastapi.tiangolo.com/
- **LangChain:** https://python.langchain.com/

---

**–ö–æ–Ω–µ—Ü —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è**

_–í–µ—Ä—Å–∏—è 1.0 –æ—Ç 7 –¥–µ–∫–∞–±—Ä—è 2025_

